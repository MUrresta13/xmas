<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Xmas Hunt</title>

  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#0b2a1e" />
  <link rel="icon" href="./assets/xmas.PNG" />

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="snow" aria-hidden="true"></div>

  <main class="wrap">
    <header class="topbar">
      <div class="brand">
        <img class="brandIcon" src="./assets/xmas.PNG" alt="Xmas Hunt" />
        <div class="brandText">
          <div class="brandTitle">Xmas Hunt</div>
          <div class="brandSub">Christmas Scavenger Hunt 2025</div>
        </div>
      </div>

      <div class="topActions">
        <button id="musicOpenBtn" class="btn btn--ghost" type="button">üéµ Music</button>
        <button id="rulesOpenBtn" class="btn btn--ghost" type="button">üìú Rules</button>
      </div>
    </header>

    <aside id="musicDrawer" class="drawer" aria-hidden="true">
      <div class="drawerHeader">
        <div class="drawerTitle">Background Music</div>
        <button id="musicCloseBtn" class="btn btn--ghost" type="button">‚úï</button>
      </div>

      <div class="drawerBody">
        <div class="musicRow">
          <label class="switch">
            <input id="musicEnabled" type="checkbox" checked />
            <span class="slider"></span>
          </label>
          <div class="musicLabel">
            <div class="musicTitle">Music On</div>
            <div class="musicSub">Toggle background music</div>
          </div>
        </div>

        <div class="musicControls">
          <button id="musicPrevBtn" class="btn btn--ghost" type="button">‚èÆ</button>
          <button id="musicPlayPauseBtn" class="btn btn--primary" type="button">‚è∏</button>
          <button id="musicNextBtn" class="btn btn--ghost" type="button">‚è≠</button>
        </div>

        <div class="drawerDivider"></div>

        <div class="drawerSectionTitle">Playlist</div>
        <div id="musicList" class="musicList"></div>

        <div class="tinyNote">
          Put mp3 files in <code>/assets</code> and edit the playlist in <code>app.js</code>.
        </div>
      </div>
    </aside>

    <div id="rulesModal" class="modal" aria-hidden="true">
      <div class="modalCard">
        <div class="modalHeader">
          <div class="modalTitle">How This Works</div>
          <button id="rulesCloseBtn" class="btn btn--ghost" type="button">‚úï</button>
        </div>
        <div class="modalBody">
          <ul class="rulesList">
            <li>Unlock your first clue by entering <b>CHRISTMAS2025</b> in the Main Path unlock box.</li>
            <li>Each clue has a passcode box. When you find that... house, you‚Äôll get the passcode and enter it here to solve.</li>
            <li>Solving a clue unlocks another clue in that path.</li>
            <li>Hints unlock over time after each clue is unlocked.</li>
          </ul>
        </div>
      </div>
    </div>

    <section class="grid">
      <section class="leftCol">
        <section class="card">
          <div class="cardTitle">Player</div>

          <div class="row">
            <div>
              <div class="labelStrong">Your Name</div>
              <div class="labelSub">Name locks after saving. Leaderboard is shared if backend is configured.</div>
            </div>
          </div>

          <div class="row">
            <input id="playerNameInput" class="input" type="text" placeholder="Enter your name" />
            <button id="saveNameBtn" class="btn btn--primary" type="button">Save</button>
          </div>
        </section>

        <section class="card">
          <div class="cardTitleRow">
            <div class="cardTitle">Leaderboard</div>
            <button id="refreshLeaderboardBtn" class="btn btn--ghost btn--tiny" type="button" title="Refresh leaderboard">‚ü≥</button>
          </div>

          <div class="tabs" id="lbTabs"></div>
          <div id="leaderboard" class="leaderboard"></div>
        </section>
      </section>

      <section class="rightCol">
        <section class="card">
          <div class="cardTitle">Unlock Boxes</div>

          <div class="unlockGrid">
            <div class="unlockBox">
              <div class="unlockTitle">Main Path (Red/Green ‚Üí Gold)</div>
              <div class="labelSub">Type <b>CHRISTMAS2025</b> to unlock your first clue (only once).</div>
              <div class="row">
                <input id="unlockMainInput" class="input" type="text" placeholder="Enter code" />
                <button id="unlockMainBtn" class="btn btn--primary" type="button">Unlock</button>
              </div>
            </div>

            <div class="unlockBox">
              <div class="unlockTitle">Blue Path Unlock</div>
              <div class="labelSub">Edit the code in <code>app.js</code>.</div>
              <div class="row">
                <input id="unlockBlueInput" class="input" type="text" placeholder="Enter path code" />
                <button id="unlockBlueBtn" class="btn btn--primary" type="button">Unlock</button>
              </div>
            </div>

            <div class="unlockBox">
              <div class="unlockTitle">Purple Path Unlock</div>
              <div class="labelSub">Edit the code in <code>app.js</code>.</div>
              <div class="row">
                <input id="unlockPurpleInput" class="input" type="text" placeholder="Enter path code" />
                <button id="unlockPurpleBtn" class="btn btn--primary" type="button">Unlock</button>
              </div>
            </div>

            <div class="unlockBox">
              <div class="unlockTitle">Orange Path Unlock</div>
              <div class="labelSub">Edit the code in <code>app.js</code>.</div>
              <div class="row">
                <input id="unlockOrangeInput" class="input" type="text" placeholder="Enter path code" />
                <button id="unlockOrangeBtn" class="btn btn--primary" type="button">Unlock</button>
              </div>
            </div>

            <div class="unlockBox">
              <div class="unlockTitle">White Path Unlock</div>
              <div class="labelSub">Edit the code in <code>app.js</code>.</div>
              <div class="row">
                <input id="unlockWhiteInput" class="input" type="text" placeholder="Enter path code" />
                <button id="unlockWhiteBtn" class="btn btn--primary" type="button">Unlock</button>
              </div>
            </div>

            <div class="unlockBox">
              <div class="unlockTitle">Quick Links</div>
              <div class="labelSub">Scroll to any path using these.</div>
              <div class="chips" id="quickLinks"></div>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="cardTitle">Clues List</div>
          <div id="cluesRoot" class="clueContainer"></div>
        </section>
      </section>
    </section>

    <audio id="bgm" preload="auto"></audio>
    <audio id="sfxUnlock" src="./assets/Unlock.mp3" preload="auto"></audio>
    <audio id="sfxWinner" src="./assets/winner.mp3" preload="auto"></audio>

    <div id="notifyModal" class="modal" aria-hidden="true">
      <div class="modalCard">
        <div class="modalHeader">
          <div id="notifyTitle" class="modalTitle">Notice</div>
          <button id="notifyCloseBtn" class="btn btn--ghost" type="button">‚úï</button>
        </div>
        <div class="modalBody notifyBody">
          <div id="notifyBody" class="notifyText"></div>
          <div id="notifyConfetti" class="confetti" aria-hidden="true"></div>
          <div class="notifyActions">
            <button id="notifyOkBtn" class="btn btn--primary" type="button">Back to Interface</button>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- IMPORTANT: module is required because app.js imports Supabase -->
  <script type="module" src="./app.js"></script>
</body>
</html>
